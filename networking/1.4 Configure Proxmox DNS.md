# Task 1.4: Configure Proxmox DNS

**Objective**: Configure Proxmox to use OPNsense DNS.

**Steps**:
1. Access Proxmox Web UI: `https://192.168.1.10:8006`
2. Navigate to: **Datacenter → [Your Node] → System → DNS**
3. Configure DNS servers (one per line):
   ```
   192.168.1.1
   1.1.1.1
   ```
   **Note**: Proxmox allows multiple DNS servers. Two is sufficient (matching OPNsense DHCP configuration). You can optionally add a third:
   ```
   192.168.1.1
   1.1.1.1
   1.0.0.1
   ```
   The third DNS server (`1.0.0.1`) provides additional redundancy but is optional.
4. Configure **Search Domain**: Enter `cuffney.com`
   - This allows Proxmox to use short hostnames (e.g., `shire` instead of `shire.cuffney.com`)
   - Matches the search domain configured in OPNsense DHCP
5. Click **OK**

**Test**:
```bash
# SSH into Proxmox
ssh root@192.168.1.10

# Check DNS configuration
cat /etc/resolv.conf
# Should show: nameserver 192.168.1.1
# Should show: search cuffney.com

# Test DNS resolution
nslookup google.com
dig @192.168.1.1 google.com

# Test search domain (if shire/opnsense DNS override is configured)
nslookup shire
# Should resolve to 192.168.1.1 (using search domain)
```

**Expected Result**: Proxmox uses OPNsense DNS and can resolve domains.
