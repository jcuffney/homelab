# Task 1.10: Add DNS Override for OPNsense (FQDN)

**Objective**: Create DNS entries so `shire` (and its FQDN) resolves to `192.168.1.1`.

## Hosts vs Aliases

In OPNsense Unbound DNS Overrides:
- **Hosts**: Primary DNS entries (A records) - the main hostname
- **Aliases**: Secondary names that point to a host - alternative names for the same IP

**For this task**: Use **Hosts** to create the primary DNS entries. Aliases are optional if you want additional names.

**Steps**:
1. In OPNsense: **Services → Unbound DNS → Overrides**
2. Navigate to the **Hosts** section (not Aliases)
3. Create host override (FQDN with domain):
   - Click **Add** button
   - Configure:
     - **Host**: `shire`
     - **Domain**: `cuffney.com` (required - OPNsense does not allow empty domain)
     - **Type**: `A`
     - **Value**: `192.168.1.1`
     - **TTL**: `300` (5 minutes - recommended for local DNS overrides)
     - **Description**: `OPNsense router (shire)`
   - Click **Save**
4. Click **Apply Changes**

**TTL (Time To Live) Notes**:
- **300 seconds (5 minutes)**: Recommended for local DNS overrides
  - Allows quick updates if you change IP addresses
  - Low overhead for local network
  - Good balance between performance and flexibility
- **Alternative values**:
  - `600` (10 minutes): Slightly longer cache, still flexible
  - `3600` (1 hour): Longer cache, less flexible for changes
- For local/internal DNS, lower TTL (300-600) is preferred

**Important Notes**:
- **Domain is required**: OPNsense does not allow creating host overrides without a domain
- **Short name still works**: The short name `shire` will work automatically via the search domain (`cuffney.com`) configured in DHCP (Task 1.3)
- When you type `shire`, the system appends `cuffney.com` to make `shire.cuffney.com`, which resolves via this override

**If you want `opnsense` to also resolve** (descriptive name), create an additional Host entry:
- **Host**: `opnsense`
- **Domain**: `cuffney.com`
- **Type**: `A`
- **Value**: `192.168.1.1`
- **TTL**: `300`
- **Description**: `OPNsense router (opnsense - descriptive)`

**Test**:
```bash
# Test DNS resolution (FQDN)
nslookup shire.cuffney.com
# Should resolve to: 192.168.1.1

dig @192.168.1.1 shire.cuffney.com
# Should return: shire.cuffney.com.  IN A 192.168.1.1

# Test short name (uses search domain from DHCP)
nslookup shire
# Should resolve to: 192.168.1.1
# (System automatically appends cuffney.com via search domain)
```

**Expected Result**: 
- `shire.cuffney.com` resolves to `192.168.1.1` (via DNS override)
- `shire` resolves to `192.168.1.1` (via search domain + DNS override)
