# Task 1.3: Configure DHCP to Use Unbound

**Objective**: Make all devices on your network use OPNsense as DNS server.

**Steps**:
1. In OPNsense: **Services → ISC DHCPv4 → [LAN]**
   - **Note**: Use "ISC DHCPv4" (not "DHCPv4" or "Unbound DNS")
2. Scroll to **DNS Servers** section
3. Configure (only 2 DNS server fields available):
   - **Primary DNS**: `192.168.1.1` (OPNsense/Unbound)
   - **Secondary DNS**: `1.1.1.1` (Cloudflare fallback)
4. Click **Save**
5. Restart the DHCP service to apply changes:
   - Navigate to: **Services → ISC DHCPv4**
   - Click **Restart** button (or **Stop** then **Start**)
   - **Note**: There is no "Apply Changes" button - restarting the service applies the changes

**Test**:
```bash
# On a device that gets IP via DHCP

# Linux/Unix: Check DNS configuration
cat /etc/resolv.conf
# Should show: nameserver 192.168.1.1

# macOS: Check DNS configuration (macOS doesn't use /etc/resolv.conf)
scutil --dns
# Look for resolver #1 - should show nameserver[0] or nameserver[1] as 192.168.1.1
# Also verify search domain is set (e.g., cuffney.com)

# Test DNS resolution (works on both Linux and macOS)
nslookup google.com
# Should resolve successfully
# Note: macOS may prefer IPv6 DNS first, but 192.168.1.1 should be in the list
```

**Expected Result**: DHCP clients use OPNsense as DNS server.
